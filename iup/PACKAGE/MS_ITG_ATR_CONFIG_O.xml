<?xml version="1.0" encoding="UTF-8"?><PACKAGE_SPEC xmlns="http://www.metricstream.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.metricstream.com ms_application_schema.xsd">
<PLATFORM_DETAILS>
<PLATFORM_VERSION>6.1</PLATFORM_VERSION>
<BUILD_VERSION>6.4.2.0</BUILD_VERSION>
</PLATFORM_DETAILS>
<STORED_PROCEDURE_NAME><![CDATA[MS_ITG_ATR_CONFIG_O]]></STORED_PROCEDURE_NAME>
<OBJECT_ID><![CDATA[MS_ITG_ATR_CONFIG_O]]></OBJECT_ID>
<OBJECT_TYPE><![CDATA[PACKAGE]]></OBJECT_TYPE>
<TEXT><![CDATA[PACKAGE MS_ITG_ATR_CONFIG_O IS

/* --------------------------------------------------------------------------
    ETL Package generated by the Data Designer ETL Engine.
    Package Specification.
    Author : Data Designer ETL Engine
    Package Name : MS_ITG_ATR_CONFIG_O
    Creation Time : 2016-APR-27 02:07:22.098702000
   -------------------------------------------------------------------------- */

/* --------------------------------------------------------------------------
   IMPORTANT NOTE:
   ---------------
   PLEASE DO NOT ALTER THIS PACKAGE. IT IS AUTO GENERATED BY THE ETL ENGINE.
   FOR ANY CUSTOMIZATION, CODE THE NEEDED FUNCTIONALITY AND PLUG IT IN THE
   HOOKS PACKAGE PROVIDED BY THE APP STUDIO PROCESS DESIGNER.
   INTEGRITY OF THE APP STUDIO DATA DESIGNER ETL ENGINE CANNOT BE GUARANTEED
   IF THIS AUTO GENERATED CODE IS CUSTOMIZED.
   -------------------------------------------------------------------------- */

/* --------------------------------------------------------------------------
    Defining Global Variables
   -------------------------------------------------------------------------- */
    GC_package_name CONSTANT VARCHAR2(100) := 'MS_ITG_ATR_CONFIG_O';
    GV_program_name VARCHAR2(100);
/* --------------------------------------------------------------------------
    LOCK_ENTRY : Procedure to lock the object in order to stop
                    any other transitions happening on the same object.
                    This routine will set the DD_EDIT_FLAG to N.
   -------------------------------------------------------------------------- */

    PROCEDURE LOCK_ENTRY
        (
            iop_SERVER_URL                          IN                        VARCHAR2,
            iop_log_no                              IN     OUT                NUMBER,
            op_error_code                                  OUT                NUMBER,
            op_error_message                               OUT                VARCHAR2
        );

/* --------------------------------------------------------------------------
    UNLOCK_ENTRY : Procedure to unlock the object in order to allow
                    other transitions on the object.
                    This routine will set the DD_EDIT_FLAG to Y.
   -------------------------------------------------------------------------- */

    PROCEDURE UNLOCK_ENTRY
        (
            iop_SERVER_URL                          IN                        VARCHAR2,
            iop_log_no                              IN     OUT                NUMBER,
            op_error_code                                  OUT                NUMBER,
            op_error_message                               OUT                VARCHAR2
        );
END MS_ITG_ATR_CONFIG_O ; ]]></TEXT>
<TEXT_BODY><![CDATA[PACKAGE BODY MS_ITG_ATR_CONFIG_O IS

/* --------------------------------------------------------------------------
    This Package generated by the Data Designer Engine.
    Package Body.
    Author : Data Designer Engine
   -------------------------------------------------------------------------- */

/* --------------------------------------------------------------------------
    LOCK_ENTRY : Procedure to lock the object in order to stop
                    any other transitions happening on the same object.
                    This routine will set the DD_EDIT_FLAG to N.
   -------------------------------------------------------------------------- */

    PROCEDURE LOCK_ENTRY
        (
            iop_SERVER_URL                          IN                        VARCHAR2,
            iop_log_no                              IN     OUT                NUMBER,
            op_error_code                                  OUT                NUMBER,
            op_error_message                               OUT                VARCHAR2
        )
    AS
/* --------------------------------------------------------------------------
    CURSOR to get the next log no to log all the activities done
    by the ETL procedure.
   -------------------------------------------------------------------------- */
        CURSOR LC_get_app_log_no IS
            SELECT ms_apps_mdf_error_handle_id_s.NEXTVAL --Log#1
            --MS_APPS_APP_BUILDER_LOG_NO.NEXTVAL
            AS APP_LOG_NO
              FROM DUAL;
        LV_log_no LC_get_app_log_no%ROWTYPE;
        lV_program_name VARCHAR2(100);
    BEGIN
/* --------------------------------------------------------------------------
    Start of the Procedure LOCK_ENTRY
   -------------------------------------------------------------------------- */

/* --------------------------------------------------------------------------
    Setting Savepoint.
   -------------------------------------------------------------------------- */
        SAVEPOINT MS_APPS_DO_LOCK_SAVEPOINT;

/* --------------------------------------------------------------------------
    Note: MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY will be called to log
            the activity performed by this routine
   -------------------------------------------------------------------------- */
        op_error_code := 0;
        op_error_message := '';
        lV_program_name := 'LOCK_ENTRY';
        MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] Start', 'I');

/* --------------------------------------------------------------------------
   Procedure LOCK_ENTRY is to lock the entries of all Data Objects
   that are part of the Data Form.
   It sets the DD_EDIT_FLAG = 'N' for the given PROCESS_INSTANCE_ID
   -------------------------------------------------------------------------- */

        IF iop_log_no IS NULL THEN
            OPEN LC_get_app_log_no;
            FETCH LC_get_app_log_no INTO LV_log_no;
            CLOSE LC_get_app_log_no;
            iop_log_no := LV_log_no.APP_LOG_NO;
        ELSE
            LV_log_no.APP_LOG_NO := iop_log_no;
        END IF;


        MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] Setting DD_EDIT_FLAG to N of MS_ITG_ATR_CONFIG', 'D');

        UPDATE MS_ITG_ATR_CONFIG
           SET DD_EDIT_FLAG = 'N'
         WHERE SERVER_URL                               = iop_SERVER_URL;

        MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] Total Updates : ' || SQL%ROWCOUNT, 'D');

    MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] End', 'I');
    EXCEPTION
        WHEN OTHERS THEN
            MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] ERROR', 'C');
            MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] SQLCODE : ' || SQLCODE , 'E');
            MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] SQLERRM : ' || SUBSTR(SQLERRM, 1, 3900) , 'E');
            MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] Calling Rollback' , 'I');
            ROLLBACK TO MS_APPS_DO_LOCK_SAVEPOINT;
            op_error_code := -1;
            op_error_message := GC_package_name || '.' || lv_program_name || ' - (' || SQLCODE || ') - (' || SUBSTR(SQLERRM, 1, 255) || ')';
    END LOCK_ENTRY;

/* --------------------------------------------------------------------------
    UNLOCK_ENTRY : Procedure to unlock the object in order to allow
                    other transitions on the object.
                    This routine will set the DD_EDIT_FLAG to Y.
   -------------------------------------------------------------------------- */

    PROCEDURE UNLOCK_ENTRY
        (
            iop_SERVER_URL                          IN                        VARCHAR2,
            iop_log_no            IN     OUT                NUMBER,
            op_error_code                OUT                NUMBER,
            op_error_message             OUT                VARCHAR2
        )
    AS
/* --------------------------------------------------------------------------
    CURSOR to get the next log no to log all the activities done
    by the ETL procedure.
   -------------------------------------------------------------------------- */
        CURSOR LC_get_app_log_no IS
            SELECT ms_apps_mdf_error_handle_id_s.NEXTVAL --Log#1
            --MS_APPS_APP_BUILDER_LOG_NO.NEXTVAL
            AS APP_LOG_NO
              FROM DUAL;
        LV_log_no LC_get_app_log_no%ROWTYPE;
        lV_program_name VARCHAR2(100);
    BEGIN
/* --------------------------------------------------------------------------
    Start of the Procedure UNLOCK_ENTRY
   -------------------------------------------------------------------------- */

/* --------------------------------------------------------------------------
    Setting Savepoint.
   -------------------------------------------------------------------------- */
        SAVEPOINT MS_APPS_DO_UNLOCK_SAVEPOINT;

/* --------------------------------------------------------------------------
    Note: MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY will be called to log
            the activity performed by this routine
   -------------------------------------------------------------------------- */
        op_error_code := 0;
        op_error_message := '';
        lV_program_name := 'UNLOCK_ENTRY';
        MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] Start', 'I');

/* --------------------------------------------------------------------------
   Procedure UNLOCK_ENTRY is to unlock the entries of all Data Objects
   that are part of the Data Form.
   It sets the DD_EDIT_FLAG = 'Y' for the given PROCESS_INSTANCE_ID
   -------------------------------------------------------------------------- */

        IF iop_log_no IS NULL THEN
            OPEN LC_get_app_log_no;
            FETCH LC_get_app_log_no INTO LV_log_no;
            CLOSE LC_get_app_log_no;
            iop_log_no := LV_log_no.APP_LOG_NO;
        ELSE
            LV_log_no.APP_LOG_NO := iop_log_no;
        END IF;


        MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] Setting DD_EDIT_FLAG to Y of MS_ITG_ATR_CONFIG', 'D');

        UPDATE MS_ITG_ATR_CONFIG
           SET DD_EDIT_FLAG = 'Y'
         WHERE SERVER_URL                               = iop_SERVER_URL;

        MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] Total Updates : ' || SQL%ROWCOUNT, 'D');

    MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] End', 'I');
    EXCEPTION
        WHEN OTHERS THEN
            MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] ERROR', 'C');
            MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] SQLCODE : ' || SQLCODE , 'E');
            MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] SQLERRM : ' || SUBSTR(SQLERRM, 1, 3900) , 'E');
            MS_APPS_APP_BUILDER_PKG.LOG_ACTIVITY(LV_log_no.APP_LOG_NO, '[ ' || GC_package_name || '.' || LV_PROGRAM_NAME ||  '] Calling Rollback' , 'I');
            ROLLBACK TO MS_APPS_DO_UNLOCK_SAVEPOINT;
            op_error_code := -1;
            op_error_message := GC_package_name || '.' || lv_program_name || ' - (' || SQLCODE || ') - (' || SUBSTR(SQLERRM, 1, 255) || ')';
    END UNLOCK_ENTRY;

END MS_ITG_ATR_CONFIG_O; ]]></TEXT_BODY>
</PACKAGE_SPEC>
